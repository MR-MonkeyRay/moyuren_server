<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‘¸é±¼æ—¥å† {{ date.year_month }} - æ‚å¿—é£æ ¼ç‰ˆ</title>
    <style>
        :root {
            /* è«å…°è¿ª/æ‚å¿—é£é…è‰² */
            --bg-body: #E0E5EC;
            --bg-paper: #F7F9F9;

            --text-dark: #2C3E50;
            --text-grey: #7F8C8D;
            --text-light: #95A5A6;

            --accent-blue: #D6EAF8;
            --accent-blue-text: #2E86C1;

            --accent-green: #D5F5E3;
            --accent-green-text: #27AE60;

            --accent-pink: #FADBD8;
            --accent-pink-text: #C0392B;

            --card-radius: 16px;
            --spacing: 16px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-body);
            font-family: 'PingFang SC', 'Helvetica Neue', sans-serif;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* ç¦æ­¢æ»šåŠ¨æ¡ */
        }

        /* æ ¸å¿ƒå®¹å™¨ï¼šé”å®šA4æ¯”ä¾‹ï¼Œé«˜åº¦è‡ªé€‚åº”å±å¹• */
        .poster {
            aspect-ratio: 210 / 297;
            height: 92vh; /* ç•™å‡ºä¸€ç‚¹è¾¹è· */
            background-color: var(--bg-paper);
            border-radius: 8px;
            box-shadow: 20px 20px 60px #bebebe, -20px -20px 60px #ffffff;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: var(--spacing);
            color: var(--text-dark);
        }

        /* é€šç”¨å¡ç‰‡é£æ ¼ */
        .box {
            background: #FFFFFF;
            border-radius: var(--card-radius);
            padding: 20px;
            /* æŸ”å’Œçš„æŠ•å½±è®©å¡ç‰‡æµ®èµ·æ¥ */
            box-shadow: 0 4px 20px rgba(0,0,0,0.03);
            border: 1px solid rgba(0,0,0,0.02);
        }

        h2 {
            font-size: 1.8vh;
            color: var(--text-grey);
            font-weight: 600;
            margin-bottom: 12px;
            letter-spacing: 1px;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* --- ç¬¬ä¸€æ’ï¼šå¤´éƒ¨ (å›ºå®šé«˜åº¦) --- */
        .row-header {
            height: 16%;
            display: flex;
            gap: var(--spacing);
        }

        .title-card {
            flex: 0.35;
            background-color: var(--text-dark);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .moyu-text { font-size: 4vh; font-weight: 900; line-height: 1.1; letter-spacing: 4px; }
        .moyu-sub { font-size: 1.2vh; font-weight: 300; opacity: 0.8; margin-top: 8px; letter-spacing: 2px; }

        .date-card {
            flex: 0.65;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
        }
        .date-left { display: flex; flex-direction: column; }
        .big-day { font-size: 7vh; font-weight: 800; color: var(--text-dark); line-height: 1; }
        .ym-text { font-size: 2vh; color: var(--text-grey); font-weight: 500; }

        .date-right { text-align: right; }
        .week-pill {
            background: var(--accent-blue); color: var(--accent-blue-text);
            padding: 6px 16px; border-radius: 20px; font-weight: bold; font-size: 1.6vh;
            display: inline-block; margin-bottom: 8px;
        }
        .lunar-text { font-size: 1.4vh; color: var(--text-grey); }

        /* --- ç¬¬äºŒæ’ï¼šä¿¡æ¯ (å¼¹æ€§) --- */
        .row-info {
            height: 20%;
            display: flex;
            gap: var(--spacing);
        }

        .term-card {
            flex: 0.4;
            background: linear-gradient(135deg, #ffffff 0%, #fcfdfc 100%);
            display: flex;
            flex-direction: column;
        }
        .countdown-wrap { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .days-num { font-size: 5vh; font-weight: 800; color: var(--accent-green-text); line-height: 1; }
        .days-label { font-size: 1.4vh; color: var(--text-grey); margin-top: 4px; }

        .yi-ji-row {
            display: flex; gap: 10px; font-size: 1.2vh; border-top: 1px dashed #eee; padding-top: 10px;
        }
        .tag { padding: 2px 6px; border-radius: 4px; font-weight: bold; margin-right: 4px; }
        .tag.yi { background: #E8F8F5; color: #1ABC9C; }
        .tag.ji { background: #FDEDEC; color: #E74C3C; }

        .history-card {
            flex: 0.6;
            display: flex;
            flex-direction: column;
        }
        .history-content {
            flex: 1;
            font-size: 1.5vh;
            line-height: 1.6;
            color: #555;
            display: flex;
            align-items: center;
            text-align: justify;
        }
        .joke-tag { font-size: 1.2vh; color: #aaa; margin-top: auto; text-align: right; font-style: italic; }

        /* --- ç¬¬ä¸‰æ’ï¼šä¸»è¦å†…å®¹ (å æ®å‰©ä½™æ‰€æœ‰ç©ºé—´) --- */
        .row-main {
            flex: 1; /* å…³é”®ï¼šè‡ªåŠ¨å¡«å……å‰©ä½™é«˜åº¦ */
            display: flex;
            gap: var(--spacing);
            min-height: 0; /* é˜²æ­¢æº¢å‡º */
        }

        .news-card {
            flex: 0.6;
            display: flex;
            flex-direction: column;
        }
        .news-list {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* å‡åŒ€åˆ†å¸ƒ */
            list-style: none;
        }
        .news-item {
            font-size: 1.3vh;
            padding-bottom: 8px;
            margin-bottom: 8px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: flex-start;
        }
        .news-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        .news-num {
            color: var(--accent-blue-text); font-size: 1.2vh; width: 1.5em; flex-shrink: 0; font-weight: 800;
            font-family: 'Courier New', Courier, monospace;
        }
        .news-text {
            color: #444;
            /* å–æ¶ˆæˆªæ–­ï¼Œæ˜¾ç¤ºå®Œæ•´å†…å®¹ */
            line-height: 1.4;
        }

        .holiday-card {
            flex: 0.4;
            background-color: #FFF8F8; /* ææ·¡çš„ç²‰è‰²èƒŒæ™¯ */
            display: flex;
            flex-direction: column;
        }
        .holiday-list {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px; /* å‡å°é—´è· */
            overflow-y: auto; /* å†…å®¹è¿‡å¤šæ—¶æ»šåŠ¨ï¼Œè™½ç„¶æ‰“å°ä¸éœ€è¦ */
        }
        .holiday-item {
            background: #fff;
            padding: 8px 12px; /* å‡å°å†…è¾¹è· */
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 4px rgba(0,0,0,0.02);
            /* flex: 1;  å–æ¶ˆè‡ªåŠ¨æ‹‰ä¼¸ï¼Œæ›´ç´§å‡‘ */
        }
        .h-info { display: flex; flex-direction: column; justify-content: center; }
        .h-name { font-size: 1.4vh; font-weight: 700; color: #333; }
        .h-date { font-size: 1vh; color: #999; margin-top: 2px; }

        .h-count-wrap { text-align: right; }
        .h-num { font-size: 2.4vh; font-weight: 800; color: var(--accent-pink-text); }
        .h-unit { font-size: 0.8vh; color: var(--text-light); }

        /* æ‰“å°æ ·å¼ */
        @media print {
            body { background: white; height: auto; overflow: visible; }
            .poster {
                width: 100%; height: 100%;
                box-shadow: none; padding: 0;
                aspect-ratio: auto;
            }
            .box { border: 1px solid #ddd; }
        }
    </style>
</head>
<body>

    <div class="poster">

        <!-- ç¬¬ä¸€æ’ï¼šæ ‡é¢˜ä¸æ—¥æœŸ -->
        <div class="row-header">
            <div class="box title-card">
                <div class="moyu-text">æ‘¸é±¼<br>æ—¥å†</div>
                <div class="moyu-sub">MOYU CALENDAR</div>
            </div>
            <div class="box date-card">
                <div class="date-left">
                    <div class="ym-text">{{ date.year_month }}</div>
                    <div class="big-day">{{ date.day }}</div>
                </div>
                <div class="date-right">
                    <div class="week-pill">{{ date.week_cn }} Â· {{ date.week_en }}</div>
                    <div class="lunar-text">å†œå† {{ date.lunar_year }}</div>
                    <div class="lunar-text">{{ date.lunar_date }}</div>
                    <div style="margin-top:6px; font-size:1.2vh; color:#E67E22; font-weight:bold;">
                        â³ è·å‘¨æœ«è¿˜æœ‰ {{ weekend.days_left }} å¤©
                    </div>
                </div>
            </div>
        </div>

        <!-- ç¬¬äºŒæ’ï¼šèŠ‚æ°”ä¸å®œå¿Œ -->
        <div class="row-info">
            <div class="box term-card">
                <h2>ğŸŒ¿ ä¸‹ä¸ªèŠ‚æ°”</h2>
                <div class="countdown-wrap">
                    <div class="days-num">{{ solar_term.days_left }}</div>
                    <div class="days-label">å¤©å Â· {{ solar_term.name }} ({{ solar_term.name_en }})</div>
                </div>
                <div class="yi-ji-row">
                    <div><span class="tag yi">å®œ</span>{% for item in guide.yi %}{{ item }} {% endfor %}</div>
                    <div><span class="tag ji">å¿Œ</span>{% for item in guide.ji %}{{ item }} {% endfor %}</div>
                </div>
            </div>
            <div class="box history-card">
                <h2>ğŸ“œ å†å²ä¸Šçš„ä»Šå¤©</h2>
                <div class="history-content">
                    {{ history.content }}
                </div>
                <div class="joke-tag">â€”â€” æ‘¸é±¼åŠå®£</div>
            </div>
        </div>

        <!-- ç¬¬ä¸‰æ’ï¼šæ–°é—»ä¸å‡æœŸ -->
        <div class="row-main">
            <div class="box news-card">
                <h2>ğŸ“° æ¯æ—¥ 60s é€Ÿè§ˆ</h2>
                <ul class="news-list" id="news-list">
                    {% for item in news_list %}
                    <li class="news-item"><span class="news-num">{{ item.num }}</span><span class="news-text">{{ item.text }}</span></li>
                    {% endfor %}
                </ul>
            </div>

            <div class="box holiday-card">
                <h2>ğŸ–ï¸ å‡æœŸç›¼å¤´</h2>
                <div class="holiday-list">
                    {% for holiday in holidays %}
                    <div class="holiday-item">
                        <div class="h-info">
                            <div class="h-name">{{ holiday.name }}</div>
                            <div class="h-date">{{ holiday.date }}</div>
                        </div>
                        <div class="h-count-wrap">
                            <div class="h-num"{% if holiday.color %} style="color:{{ holiday.color }}"{% endif %}>{{ holiday.days_left }}</div>
                            <div class="h-unit">DAYS</div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

    </div>

</body>
</html>
